{% extends 'auth_base.html' %}
{% block title %}Register{% endblock %}

{% block content %}
<div class="auth-card">
  <img src="{{ url_for('static', filename='images/nwms_logo.png') }}" alt="NWMS Logo">

  <h2>Create an Account</h2>
  <form method="post">
    <label for="username">Username</label>
    <input type="text" name="username" required>

    <label for="email">Email</label>
    <input type="email" name="email" required>

    <label for="password">Password</label>
    <input type="password" name="password" required>

    <label for="role">Role</label>
    <select id="role" name="role" class="form-select" required onchange="toggleStudentFields()">
      <option value="student">Student</option>
      <option value="marker">Marker</option>
      <option value="admin">Admin</option>
    </select>

    <div id="student-fields" style="margin-top:1rem;">
      <label for="course">Course</label>
      <select name="course" class="form-select">
        <option value="">-- None --</option>
        <option value="FREC4">FREC4</option>
        <option value="SALM">SALM</option>
        <option value="CFR">CFR</option>
      </select>

      <label for="course_passcode">Course Passcode</label>
      <input type="text" name="course_passcode" placeholder="Enter course code">
    </div>

    <button type="submit">Register</button>
  </form>
  <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a>.</p>
</div>

<script>
function toggleStudentFields() {
  const role = document.getElementById('role').value;
  const fields = document.getElementById('student-fields');
  fields.style.display = (role === 'student') ? 'block' : 'none';
}
document.addEventListener("DOMContentLoaded", toggleStudentFields);
</script>
{% endblock %}